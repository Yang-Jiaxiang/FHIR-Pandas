{"resourceType":"OperationDefinition","id":"Patient-everything","text":{"status":"extensions","div":"<div xmlns=\"http://www.w3.org/1999/xhtml\"><h2>Everything</h2><p>OPERATION: Everything</p><p>The official URL for this operation definition is: </p><pre>https://twcore.mohw.gov.tw/fhir/OperationDefinition/Patient-everything</pre><div><p>此操作用於回傳與調用與病人(Patient)相關的所有Resource。回傳的Bundle類型為「searchset」。至少將會回傳病人(Patient) Resource本身，以及伺服器中具有的與病人(Patient)相關且可供給定使用者使用的任何其他Resource。伺服器將回傳支援紀錄所需的任何Resource，例如相關的健康照護服務提供者，用藥，位置，機構等。</p>\n</div><p>URL: [base]/Patient/$everything</p><p>URL: [base]/Patient/[id]/$everything</p><p>Parameters</p><table class=\"grid\"><tr><td><b>Use</b></td><td><b>Name</b></td><td><b>Cardinality</b></td><td><b>Type</b></td><td><b>Binding</b></td><td><b>Documentation</b></td></tr><tr><td>IN</td><td>start</td><td>0..1</td><td><a href=\"http://hl7.org/fhir/R4/datatypes.html#date\">date</a></td><td/><td><div><p>與照護日期有關的日期範圍，例如，在特定日期範圍內提供相關健康照護服務的所有紀錄。如果未提供開始日期，則結束日期之前的所有紀錄都在範圍內。</p>\n</div></td></tr><tr><td>IN</td><td>end</td><td>0..1</td><td><a href=\"http://hl7.org/fhir/R4/datatypes.html#date\">date</a></td><td/><td><div><p>與照護日期有關的日期範圍，例如，在特定日期範圍內提供相關健康照護服務的所有紀錄。如果未提供開始日期，則開始日期之後的所有紀錄都在範圍內。</p>\n</div></td></tr><tr><td>IN</td><td>_since</td><td>0..1</td><td><a href=\"http://hl7.org/fhir/R4/datatypes.html#instant\">instant</a></td><td/><td><div><p>在此時段之後更新的Resource將包含在回傳中。此參數的目的是允許用戶端僅請求自上次請求以來已更改的紀錄，具體取決於回傳標頭時間或（對於異步使用）交易時間</p>\n</div></td></tr><tr><td>IN</td><td>_type</td><td>0..*</td><td><a href=\"http://hl7.org/fhir/R4/datatypes.html#code\">code</a></td><td/><td><div><p>一個或多個參數，每個參數包含一個或多個以逗號分隔的FHIR Resource類型(type)，以包含在回傳Resource中。在沒有任何指定類型(type)的情況下，伺服器將回傳所有Resource類型(type)</p>\n</div></td></tr><tr><td>IN</td><td>_count</td><td>0..1</td><td><a href=\"http://hl7.org/fhir/R4/datatypes.html#integer\">integer</a></td><td/><td><div><p>對結果進行分頁</p>\n</div></td></tr><tr><td>OUT</td><td>return</td><td>1..1</td><td><a href=\"http://hl7.org/fhir/R4/bundle.html\">Bundle</a></td><td/><td><div><p>Bundle的類型(type)為「searchset」</p>\n</div></td></tr></table><div><p>此操作與一般查詢病人(Patient)的主要差別在於：</p>\n<ul>\n<li>除非用戶端另有請求，否則伺服器會在單個Bundle中回傳整個結果集（而不是使用分頁）</li>\n<li>伺服器負責確認回傳哪些Resource（而不是用戶端指定）</li>\n</ul>\n<p>這使用戶端無需確定其可以或應該要求什麼，特別是關於包含的Resource。伺服器應考慮在回傳的Resource上回傳適當的Provenance和AuditTrail，即使這些Resource不是病人(Patient)的直接部分。</p>\n<p>假設伺服器已適當地識別並保護了上下文，並且可以將授權上下文與單個病人(Patient)相關聯，或者確定上下文是否具有對指定病人(Patient)的許可權（如果有），或者可以確定適當的病人(Patient)清單以從請求的上下文中為其提供數據。如果沒有指定的病人(Patient) （GET/Patient/$everything），並且上下文未與單個病人(Patient)紀錄關聯，則實際的病人(Patient)清單是與請求關聯的使用者有權存取的所有病人(Patient)。這可能是病人(Patient)有權存取的家庭中的所有病人(Patient)，也可能是健康照護提供者有權存取的病人(Patient)，或者可能是整個系統上的所有病人(Patient)。在這種情況下，伺服器可能會選擇回傳錯誤而不是所有紀錄。</p>\n<p>當此操作用於一次存取多個病人(Patient)紀錄時，回傳的Bundle可能含相當多的數據；伺服器可以選擇要求<a href=\"http://hl7.org/fhir/2021Mar/async.html\">異步</a>發出此類請求，並與<a href=\"http://hl7.org/fhir/2021Mar/formats.html#bulk\">批量數據格式</a>相關聯。或者，用戶端可以選擇逐頁瀏覽結果集（或者伺服器可能需要這樣做）。對結果進行分頁的操作與使用<a href=\"http://hl7.org/fhir/2021Mar/search.html#count\">_count</a>參數和Bundle連結進行查詢時相同。實作者應該注意，分頁將比簡單地一次回傳所有結果（更多網路流量，多次延遲）慢，但可能需要這樣做，以免耗盡可用記憶體讀取或寫入單個Bundle中的整個回應。與查詢不同，$everything操作沒有固有的顯示順序。伺服器可以考慮按上次紀錄更新的降序對回傳的Resource進行排序，但不是必需的。</p>\n<p>提供_since參數是為了支援定期查詢，以存取自上次查詢以來有關病人(Patient)的其他更改資訊。這意味著_since參數基於紀錄時間。_since參數的值應設置為來自伺服器的時間。如果使用直接回應，則這是回應標頭中的時間戳。如果使用異步介面，則這是 json 回應中的事務時間戳。伺服器應確保託管的時間戳，以便用戶端不會錯過任何更改。在事務落在時間邊界上的情況下，客戶端應該能夠多次處理存取相同的回應。用戶端應確保其他查詢參數是常量，以確保在執行定期查詢時有一組一致的紀錄。</p>\n</div></div>"},"url":"https://twcore.mohw.gov.tw/fhir/OperationDefinition/Patient-everything","name":"Everything","title":"讀取病人(Patient)紀錄","status":"active","kind":"operation","experimental":false,"date":"2022-09-07T20:47:29+08:00","contact":[{"telecom":[{"system":"url","value":"https://www.mohw.gov.tw/"}]}],"description":"此操作用於回傳與調用與病人(Patient)相關的所有Resource。回傳的Bundle類型為「searchset」。至少將會回傳病人(Patient) Resource本身，以及伺服器中具有的與病人(Patient)相關且可供給定使用者使用的任何其他Resource。伺服器將回傳支援紀錄所需的任何Resource，例如相關的健康照護服務提供者，用藥，位置，機構等。","affectsState":false,"code":"everything","comment":"此操作與一般查詢病人(Patient)的主要差別在於：\n\n* 除非用戶端另有請求，否則伺服器會在單個Bundle中回傳整個結果集（而不是使用分頁）  \n* 伺服器負責確認回傳哪些Resource（而不是用戶端指定） \n\n這使用戶端無需確定其可以或應該要求什麼，特別是關於包含的Resource。伺服器應考慮在回傳的Resource上回傳適當的Provenance和AuditTrail，即使這些Resource不是病人(Patient)的直接部分。 \n\n假設伺服器已適當地識別並保護了上下文，並且可以將授權上下文與單個病人(Patient)相關聯，或者確定上下文是否具有對指定病人(Patient)的許可權（如果有），或者可以確定適當的病人(Patient)清單以從請求的上下文中為其提供數據。如果沒有指定的病人(Patient) （GET/Patient/$everything），並且上下文未與單個病人(Patient)紀錄關聯，則實際的病人(Patient)清單是與請求關聯的使用者有權存取的所有病人(Patient)。這可能是病人(Patient)有權存取的家庭中的所有病人(Patient)，也可能是健康照護提供者有權存取的病人(Patient)，或者可能是整個系統上的所有病人(Patient)。在這種情況下，伺服器可能會選擇回傳錯誤而不是所有紀錄。\n\n當此操作用於一次存取多個病人(Patient)紀錄時，回傳的Bundle可能含相當多的數據；伺服器可以選擇要求[異步](http://hl7.org/fhir/2021Mar/async.html)發出此類請求，並與[批量數據格式](http://hl7.org/fhir/2021Mar/formats.html#bulk)相關聯。或者，用戶端可以選擇逐頁瀏覽結果集（或者伺服器可能需要這樣做）。對結果進行分頁的操作與使用[_count](http://hl7.org/fhir/2021Mar/search.html#count)參數和Bundle連結進行查詢時相同。實作者應該注意，分頁將比簡單地一次回傳所有結果（更多網路流量，多次延遲）慢，但可能需要這樣做，以免耗盡可用記憶體讀取或寫入單個Bundle中的整個回應。與查詢不同，$everything操作沒有固有的顯示順序。伺服器可以考慮按上次紀錄更新的降序對回傳的Resource進行排序，但不是必需的。\n\n提供_since參數是為了支援定期查詢，以存取自上次查詢以來有關病人(Patient)的其他更改資訊。這意味著_since參數基於紀錄時間。_since參數的值應設置為來自伺服器的時間。如果使用直接回應，則這是回應標頭中的時間戳。如果使用異步介面，則這是 json 回應中的事務時間戳。伺服器應確保託管的時間戳，以便用戶端不會錯過任何更改。在事務落在時間邊界上的情況下，客戶端應該能夠多次處理存取相同的回應。用戶端應確保其他查詢參數是常量，以確保在執行定期查詢時有一組一致的紀錄。","resource":["Patient"],"system":false,"type":true,"instance":true,"parameter":[{"name":"start","use":"in","min":0,"max":"1","documentation":"與照護日期有關的日期範圍，例如，在特定日期範圍內提供相關健康照護服務的所有紀錄。如果未提供開始日期，則結束日期之前的所有紀錄都在範圍內。","type":"date"},{"name":"end","use":"in","min":0,"max":"1","documentation":"與照護日期有關的日期範圍，例如，在特定日期範圍內提供相關健康照護服務的所有紀錄。如果未提供開始日期，則開始日期之後的所有紀錄都在範圍內。","type":"date"},{"name":"_since","use":"in","min":0,"max":"1","documentation":"在此時段之後更新的Resource將包含在回傳中。此參數的目的是允許用戶端僅請求自上次請求以來已更改的紀錄，具體取決於回傳標頭時間或（對於異步使用）交易時間","type":"instant"},{"name":"_type","use":"in","min":0,"max":"*","documentation":"一個或多個參數，每個參數包含一個或多個以逗號分隔的FHIR Resource類型(type)，以包含在回傳Resource中。在沒有任何指定類型(type)的情況下，伺服器將回傳所有Resource類型(type)","type":"code"},{"name":"_count","use":"in","min":0,"max":"1","documentation":"對結果進行分頁","type":"integer"},{"name":"return","use":"out","min":1,"max":"1","documentation":"Bundle的類型(type)為「searchset」","type":"Bundle"}]}