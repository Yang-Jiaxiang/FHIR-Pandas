<!DOCTYPE html>
<html ng-app="ClientApp" ng-controller="ClientCtrl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>RedPanda</title>
    <link rel="stylesheet" type="text/css" href="./css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./css/bootstrap/RWD_Table.css">
    <link rel="stylesheet" type="text/css" href="./js/bootstrap/bootstrap-select-1.13.14/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="./css/client.css">
    <link rel="stylesheet" type="text/css" href="./img/icon/css/all.css">
    <link rel="icon" href="./img/RedPanda.jpg">
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Console Field -->
            <div class="col-12" id="consoleField">
                <!-- 1.Logo -->
                <div class="row mb-1">
                    <div class="col-12">
                        <img src="./img/RedPanda.jpg" class="rounded mr-2 float-left" style="height:35px;width:35px;">
                        <h2 class="text-danger float-left">RedPanda</h2>
                    </div>
                </div>
                <!-- 2.URL -->
                <div class="row">
                    <div class="col-12">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <button type="button" class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown"><strong ng-class="{'GET':'text-success','POST':'text-warning','PUT':'text-primary','DELETE':'text-danger'}[httpMethod]">{{httpMethod}}</strong></button>
                                <div class="dropdown-menu">
                                    <div class="nav">
                                        <button type="button" class="dropdown-item" data-toggle="tab" href="#GetMod" ng-click="httpMethod='GET';produceURL();">GET</button>
                                        <button type="button" class="dropdown-item" data-toggle="tab" href="#PostMod" ng-click="httpMethod='POST';produceURL();">POST</button>
                                        <button type="button" class="dropdown-item" data-toggle="tab" href="#PutMod" ng-click="httpMethod='PUT';produceURL();">PUT</button>
                                        <button type="button" class="dropdown-item" data-toggle="tab" href="#DeleteMod" ng-click="httpMethod='DELETE';produceURL();">DELETE</button>
                                    </div>
                                </div>
                            </div>
                            <input type="text" class="form-control" ng-model="URL" value="{{URL}}">
                            <div class="input-group-append">
                                <button type="button" class="btn btn-outline-secondary" ng-click="produceURL();"><i class="fas fa-sync"></i></button>
                            </div>
                            <!-- for desktop -->
                            <div class="d-none d-md-block">
                                <button type="button" class="btn btn-primary ml-1" ng-click="HttpReq(httpMethod,URL,bodyData);displayMode='Patient'">Send</button>
                                <button type="button" class="btn btn-danger ml-1" onclick="window.location.reload();">Reset</button>
                                <button type="button" id="toolsBtn" class="btn btn-secondary ml-1" type="button" data-toggle="collapse" data-target="#toolsField" ng-click="toolsIsOpen=!toolsIsOpen;"><i class="fas fa-cog"></i>&nbsp;<i class="fas" ng-class="{'true':'fa-caret-down','false':'fa-caret-up'}[toolsIsOpen]"></i></button>
                            </div>
                        </div>
                        <!-- Error Info -->
                        <div class="alert alert-danger" ng-show="ErrorInfo">
                            <h5>
                                <label>{{ErrorInfo}}</label>
                                <button type="button" class="close float-right" ng-click="ErrorInfo=''"><span>&times;</span></button>
                            </h5>
                        </div>
                        <!-- for phone -->
                        <div class="col-12 d-md-none text-center">
                            <button type="button" class="btn btn-primary ml-1" ng-click="HttpReq(httpMethod,URL,bodyData);displayMode='Patient'">Send</button>
                            <button type="button" class="btn btn-danger ml-1" onclick="window.location.reload();">Reset</button>
                            <button type="button" class="btn btn-secondary ml-1" type="button" onclick="toolsBtn.click();"><i class="fas fa-cog"></i>&nbsp;<i class="fas" ng-class="{'true':'fa-caret-down','false':'fa-caret-up'}[toolsIsOpen]"></i></button>
                        </div>
                    </div>
                </div>
                <!-- 3.Tools -->
                <div class="collapse show" id="toolsField">
                    <div class="tab-content">
                        <div id="GetMod" class="tab-pane fade show active">
                            <div class="form-row">
                                <!-- URL -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold" required>Server URL</label>
                                    <div class="input-group input-group-sm">
                                        <input type="url" class="form-control" ng-model="basePath" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="basePath='';produceURL();"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Resource -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Resource Type</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control form-control-sm disabled" ng-model="resource" value="Patient" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="resource='';produceURL();"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- ID -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">ID</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control form-control-sm" ng-model="ID" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="ID='';produceURL()"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <!-- Token -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Token</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" ng-model="Token">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="Token=''"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Sort -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Sort By</label>
                                    <div class="input-group">
                                        <select id="sortParaSelect" class="form-control form-control-sm selectpicker" ng-model="_sort" ng-change="produceURL()" data-live-search="true" data-size="7">
                                            <option value="">-- Please Select --</option>
                                            <optgroup label="Common Parameter">
                                                <option ng-repeat="para in CommonSearchParametersList" #data-subtext="{{para.Description+'：'+para.Type}}">{{para.Name}}</option>
                                            </optgroup>
                                            <optgroup label="Patient Parameter">
                                                <option ng-repeat="para in PatientSearchParametersList" #data-subtext="{{para.Description+'：'+para.Type}}">{{para.Name}}</option>
                                            </optgroup>
                                        </select>
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-sm btn-outline-secondary" ng-click="sortDirection=!sortDirection;produceURL();"><i class="fas" ng-class="{'true':'fa-sort-alpha-down','false':'fa-sort-alpha-up'}[sortDirection]"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Count -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Page Count：{{_count}}</label>
                                    <input type="range" class="form-control form-control-range" min="5" max="200" step="5" ng-model="_count" ng-change="produceURL()">
                                </div>
                            </div>
                            <hr />
                            <div class="row">
                                <!-- Parameters -->
                                <div class="form-group col-md-2">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Search Parameter</label>
                                    <select class="form-control form-control-sm selectpicker" ng-model="newParameter" ng-change="Keyword='';dateKeyword='';paraModifier='';paraPrefixes='eq';" data-live-search="true" data-size="7">
                                        <option value="">-- Please Select --</option>
                                        <optgroup label="Common Parameter">
                                            <option ng-repeat="para in CommonSearchParametersList">{{para.Name}}</option>
                                            <!--data-subtext="{{para.Description+'：'+para.Type}}"-->
                                        </optgroup>
                                        <optgroup label="Patient Parameter">
                                            <option ng-repeat="para in PatientSearchParametersList">{{para.Name}}</option>
                                            <!--data-subtext="{{para.Description+'：'+para.Type}}"-->
                                        </optgroup>
                                    </select>
                                </div>
                                <!-- Parameters input -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Value{{'：'+getParaType(newParameter)}}</label>
                                    <input type="text" class="form-control form-control-sm" ng-show="newParameter==''" disabled>
                                    <!-- Date -->
                                    <div class="input-group" ng-show="getParaType(newParameter)=='date'">
                                        <div class="input-group-prepend">
                                            <button type="button" class="btn btn-sm btn-outline-secondary" type="button" data-toggle="dropdown">{{prefixesList[paraPrefixes]}}</button>
                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" ng-click="paraPrefixes='eq'">{{prefixesList['eq']}}</a>
                                                <a class="dropdown-item" ng-click="paraPrefixes='ne'">{{prefixesList['ne']}}</a>
                                                <a class="dropdown-item" ng-click="paraPrefixes='gt'">{{prefixesList['gt']}}</a>
                                                <a class="dropdown-item" ng-click="paraPrefixes='lt'">{{prefixesList['lt']}}</a>
                                                <a class="dropdown-item" ng-click="paraPrefixes='ge'">{{prefixesList['ge']}}</a>
                                                <a class="dropdown-item" ng-click="paraPrefixes='le'">{{prefixesList['le']}}</a>
                                                <a class="dropdown-item" ng-click="paraPrefixes='sa'">{{prefixesList['sa']}}</a>
                                                <a class="dropdown-item" ng-click="paraPrefixes='eb'">{{prefixesList['eb']}}</a>
                                                <a class="dropdown-item" ng-click="paraPrefixes='ap'">{{prefixesList['ap']}}</a>
                                            </div>
                                        </div>
                                        <input type="datetime-local" class="form-control form-control-sm" ng-model="dateKeyword">
                                        <button type="button" class="btn btn-sm btn-success float-right" ng-click="addParameter(getParaType(newParameter));"><i class="fas fa-plus"></i></button>
                                    </div>
                                    <!-- String -->
                                    <div class="input-group" ng-show="getParaType(newParameter)=='string'">
                                        <div class="input-group-prepend">
                                            <button type="button" class="btn btn-sm btn-outline-secondary" type="button" data-toggle="dropdown">{{stringModifier[paraModifier]}}</button>
                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" ng-click="paraModifier=''" title="A field matches a string query if the value of the field equals or starts with the supplied parameter value, after both have been normalized by case and combining characters.">Default</a>
                                                <a class="dropdown-item" ng-click="paraModifier='contains'" title="It's returns results that include the supplied parameter value anywhere within the field being searched.">Contains</a>
                                                <a class="dropdown-item" ng-click="paraModifier='exact'" title="It's returns results that match the entire supplied parameter, including casing and accents.">Exact</a>
                                            </div>
                                        </div>
                                        <input type="text" class="form-control form-control-sm" ng-model="Keyword">
                                        <button type="button" class="btn btn-sm btn-success float-right" ng-click="addParameter(getParaType(newParameter));"><i class="fas fa-plus"></i></button>
                                    </div>
                                    <!-- Token -->
                                    <div class="input-group" ng-show="getParaType(newParameter)=='token'">
                                        <div class="input-group-prepend">
                                            <button type="button" class="btn btn-sm btn-outline-secondary" type="button" data-toggle="dropdown">{{tokenModifier[paraModifier]}}</button>
                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" ng-click="paraModifier=''">Default</a>
                                                <a class="dropdown-item" ng-click="paraModifier='text'" title="The search parameter is processed as a string that searches text associated with the code/value - either CodeableConcept.text, Coding.display, or Identifier.type.text. In this case, the search functions as a normal string search.">Text</a>
                                                <a class="dropdown-item" ng-click="paraModifier='not'" title="Reverse the code matching described in the paragraph above: return all resources that do not have a matching item. Note that this includes resources that have no value for the parameter - e.g. ?gender:not=male includes all patients that do not have gender = male, including patients that do not have a gender at all.">Not</a>
                                                <a class="dropdown-item" ng-click="paraModifier='above'" title="The search parameter is a concept with the form [system]|[code], and the search parameter tests whether the coding in a resource subsumes the specified search code. For example, the search concept has an is-a relationship with the coding in the resource, and this includes the coding itself.">Above</a>
                                                <a class="dropdown-item" ng-click="paraModifier='below'" title="The search parameter is a concept with the form [system]|[code], and the search parameter tests whether the coding in a resource is subsumed by the specified search code. For example, the coding in the resource has an is-a relationship with the search concept, and this includes the coding itself.">Below</a>
                                                <a class="dropdown-item" ng-click="paraModifier='in'" title="The search parameter is a URI (relative or absolute) that identifies a value set, and the search parameter tests whether the coding is in the specified value set. The reference may be literal (to an address where the value set can be found) or logical (a reference to ValueSet.url). If the server can treat the reference as a literal URL, it does, else it tries to match known logical ValueSet.url values.">In</a>
                                                <a class="dropdown-item" ng-click="paraModifier='not-in'" title="The search parameter is a URI (relative or absolute) that identifies a value set, and the search parameter tests whether the coding is not in the specified value set.">Not-in</a>
                                                <a class="dropdown-item" ng-click="paraModifier='of-type'" title="The search parameter has the format system|code|value, where the system and code refer to a Identifier.type.coding.system and .code, and match if any of the type codes match. All 3 parts must be present.">Of-type</a>
                                            </div>
                                        </div>
                                        <input type="text" class="form-control form-control-sm" ng-model="Keyword">
                                        <button type="button" class="btn btn-sm btn-success float-right" ng-click="addParameter(getParaType(newParameter));"><i class="fas fa-plus"></i></button>
                                    </div>
                                    <!-- Reference -->
                                    <div class="input-group" ng-show="getParaType(newParameter)=='reference'">
                                        <input type="text" class="form-control form-control-sm" ng-model="Keyword">
                                        <button type="button" class="btn btn-sm btn-success float-right" ng-click="addParameter(getParaType(newParameter));"><i class="fas fa-plus"></i></button>
                                    </div>
                                    <!-- Uri -->
                                    <div class="input-group" ng-show="getParaType(newParameter)=='uri'">
                                        <input type="text" class="form-control form-control-sm" ng-model="Keyword">
                                        <button type="button" class="btn btn-sm btn-success float-right" ng-click="addParameter(getParaType(newParameter));"><i class="fas fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <!-- Parameters List -->
                                <div class="form-group col-md-3" ng-repeat="para in searchParameters">
                                    <!-- Date -->
                                    <div ng-if="para.Type=='date'">
                                        <label>{{($index+1)+'. '+para.Key}}</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <button type="button" class="btn btn-sm btn-outline-secondary" type="button" data-toggle="dropdown">{{prefixesList[para.Modifier]}}</button>
                                                <div class="dropdown-menu">
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='eq';produceURL();">{{prefixesList['eq']}}</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='ne';produceURL();">{{prefixesList['ne']}}</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='gt';produceURL();">{{prefixesList['gt']}}</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='lt';produceURL();">{{prefixesList['lt']}}</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='ge';produceURL();">{{prefixesList['ge']}}</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='le';produceURL();">{{prefixesList['le']}}</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='sa';produceURL();">{{prefixesList['sa']}}</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='eb';produceURL();">{{prefixesList['eb']}}</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='ap';produceURL();">{{prefixesList['ap']}}</a>
                                                </div>
                                            </div>
                                            <input type="datetime-local" class="form-control form-control-sm" ng-value="para.Value | date:'yyyy-MM-ddThh:mm'" ng-model="para.Value" ng-change="produceURL();">
                                            <button type="button" class="btn btn-sm btn-danger" ng-click="rmParameter($index);"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                    <!-- String -->
                                    <div ng-if="para.Type=='string'">
                                        <label>{{($index+1)+'. '+para.Key}}</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <button type="button" class="btn btn-sm btn-outline-secondary" type="button" data-toggle="dropdown">{{stringModifier[para.Modifier]}}</button>
                                                <div class="dropdown-menu">
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='';produceURL();" title="A field matches a string query if the value of the field equals or starts with the supplied parameter value, after both have been normalized by case and combining characters.">Default</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='contains';produceURL();" title="It's returns results that include the supplied parameter value anywhere within the field being searched.">Contains</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='exact';produceURL();" title="It's returns results that match the entire supplied parameter, including casing and accents.">Exact</a>
                                                </div>
                                            </div>
                                            <input type="text" class="form-control form-control-sm" ng-value="para.Value" ng-model="para.Value" ng-change="produceURL();">
                                            <button type="button" class="btn btn-sm btn-danger" ng-click="rmParameter($index);"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                    <!-- Token -->
                                    <div ng-if="para.Type=='token'">
                                        <label>{{($index+1)+'. '+para.Key}}</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <button type="button" class="btn btn-sm btn-outline-secondary" type="button" data-toggle="dropdown">{{tokenModifier[para.Modifier]}}</button>
                                                <div class="dropdown-menu">
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='';produceURL();">Default</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='text';produceURL();" title="The search parameter is processed as a string that searches text associated with the code/value - either CodeableConcept.text, Coding.display, or Identifier.type.text. In this case, the search functions as a normal string search.">Text</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='not';produceURL();" title="Reverse the code matching described in the paragraph above: return all resources that do not have a matching item. Note that this includes resources that have no value for the parameter - e.g. ?gender:not=male includes all patients that do not have gender = male, including patients that do not have a gender at all.">Not</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='above';produceURL();" title="The search parameter is a concept with the form [system]|[code], and the search parameter tests whether the coding in a resource subsumes the specified search code. For example, the search concept has an is-a relationship with the coding in the resource, and this includes the coding itself.">Above</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='below';produceURL();" title="The search parameter is a concept with the form [system]|[code], and the search parameter tests whether the coding in a resource is subsumed by the specified search code. For example, the coding in the resource has an is-a relationship with the search concept, and this includes the coding itself.">Below</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='in';produceURL();" title="The search parameter is a URI (relative or absolute) that identifies a value set, and the search parameter tests whether the coding is in the specified value set. The reference may be literal (to an address where the value set can be found) or logical (a reference to ValueSet.url). If the server can treat the reference as a literal URL, it does, else it tries to match known logical ValueSet.url values.">In</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='not-in';produceURL();" title="The search parameter is a URI (relative or absolute) that identifies a value set, and the search parameter tests whether the coding is not in the specified value set.">Not-in</a>
                                                    <a class="dropdown-item" ng-click="searchParameters[$index].Modifier='of-type';produceURL();" title="The search parameter has the format system|code|value, where the system and code refer to a Identifier.type.coding.system and .code, and match if any of the type codes match. All 3 parts must be present.">Of-type</a>
                                                </div>
                                            </div>
                                            <input type="text" class="form-control form-control-sm" ng-value="para.Value" ng-model="para.Value" ng-change="produceURL();">
                                            <button type="button" class="btn btn-sm btn-danger" ng-click="rmParameter($index);"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                    <!-- Reference -->
                                    <div ng-if="para.Type=='reference'">
                                        <label>{{($index+1)+'. '+para.Key}}</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control form-control-sm" ng-value="para.Value" ng-model="para.Value" ng-change="produceURL();">
                                            <button type="button" class="btn btn-sm btn-danger" ng-click="rmParameter($index);"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                    <!-- Uri -->
                                    <div ng-if="para.Type=='uri'">
                                        <label>{{($index+1)+'. '+para.Key}}</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control form-control-sm" ng-value="para.Value" ng-model="para.Value" ng-change="produceURL();">
                                            <button type="button" class="btn btn-sm btn-danger" ng-click="rmParameter($index);"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="PostMod" class="tab-pane fade">
                            <div class="form-row">
                                <!-- URL -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold" required>Server URL</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" ng-model="basePath" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="basePath='';produceURL();"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Resource -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Resource Type</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control form-control-sm disabled" ng-model="resource" value="Patient" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="resource='';produceURL();"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Token -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Token</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" ng-model="Token">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="Token=''"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Body - JSON</label>
                                    <button type="button" class="btn btn-sm btn-outline-secondary float-right" ng-click="bodyData=''"><i class="fas fa-times"></i></button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary float-right" ng-click="loadExample()">Example</button>
                                    <textarea class="form-control form-control-sm" rows="15" ng-model="bodyData"></textarea>
                                </div>
                            </div>
                        </div>
                        <div id="PutMod" class="tab-pane fade">
                            <div class="form-row">
                                <!-- URL -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold" required>Server URL</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" ng-model="basePath" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="basePath='';produceURL();"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Resource -->
                                <div class="form-group col-md-3">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Resource Type</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control form-control-sm disabled" ng-model="resource" value="Patient" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="resource='';produceURL();"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- ID -->
                                <div class="form-group col-md-3">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">ID</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control form-control-sm" ng-model="ID" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="ID='';produceURL()"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Token -->
                                <div class="form-group col-md-2">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Token</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" ng-model="Token">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="Token=''"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Body - JSON</label>
                                    <button type="button" class="btn btn-sm btn-outline-secondary float-right" ng-click="bodyData=''"><i class="fas fa-times"></i></button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary float-right" ng-click="loadExample()">Example</button>
                                    <textarea class="form-control form-control-sm" rows="15" ng-model="bodyData"></textarea>
                                </div>
                            </div>
                        </div>
                        <div id="DeleteMod" class="tab-pane fade">
                            <div class="form-row">
                                <!-- URL -->
                                <div class="form-group col-md-4">
                                    <label class="col-form-label col-form-label-sm font-weight-bold" required>Server URL</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" ng-model="basePath" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="basePath='';produceURL();"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Resource -->
                                <div class="form-group col-md-3">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Resource Type</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control form-control-sm disabled" ng-model="resource" value="Patient" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="resource='';produceURL();"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- ID -->
                                <div class="form-group col-md-3">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">ID</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control form-control-sm" ng-model="ID" ng-change="produceURL()">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="ID='';produceURL()"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Token -->
                                <div class="form-group col-md-2">
                                    <label class="col-form-label col-form-label-sm font-weight-bold">Token</label>
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" ng-model="Token">
                                        <div class="input-group-append">
                                            <button type="button" class="btn btn-outline-secondary" ng-click="Token=''"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!-- Result Field -->
            <div class="col-12" id="resultField" ng-show="httpResult">
                <!-- 1.Head -->
                <div class="row mb-2">
                    <div class="col-12 d-none d-md-block">
                        <h3>
                            <strong class="float-left">{{httpResult}}</strong>
                            <div class="btn-group btn-group-sm float-right">
                                <button type="button" class="btn btn-secondary" ng-disabled="!prevPage" ng-show="displayMode=='Patient'" ng-click="HttpReq('GET',prevPage)"><i class="fas fa-chevron-left mr-1"></i>Prev</button>
                                <button type="button" class="btn btn-outline-secondary" ng-show="displayMode=='Patient'" disabled>{{pageNum/_count+1}}</button>
                                <button type="button" class="btn btn-secondary" ng-disabled="!nextPage" ng-show="displayMode=='Patient'" ng-click="HttpReq('GET',nextPage)">Next<i class="fas fa-chevron-right ml-1"></i></button>
                                <button type="button" class="btn btn-sm btn-info" ng-show="displayMode=='Identifier'" ng-click="displayMode='Patient'"><i class="fas fa-angle-double-left mr-1"></i>Patient</button>
                            </div>
                        </h3>
                    </div>
                    <div class="col-12 d-md-none">
                        <h3> <strong>{{httpResult}}</strong> </h3>
                    </div>
                    <div class="col-12 d-md-none text-center">
                        <h3>
                            <div class="btn-group btn-group-sm">
                                <button type="button" class="btn btn-secondary" ng-disabled="!prevPage" ng-show="displayMode=='Patient'" ng-click="HttpReq('GET',prevPage)"><i class="fas fa-chevron-left mr-1"></i>Prev</button>
                                <button type="button" class="btn btn-outline-secondary" ng-show="displayMode=='Patient'">{{pageNum/_count+1}}</button>
                                <button type="button" class="btn btn-secondary" ng-disabled="!nextPage" ng-show="displayMode=='Patient'" ng-click="HttpReq('GET',nextPage)">Next<i class="fas fa-chevron-right ml-1"></i></button>
                            </div>
                            <button type="button" class="btn btn-sm btn-info" ng-show="displayMode=='Identifier'" ng-click="displayMode='Patient'"><i class="fas fa-angle-double-left mr-1"></i>Patient</button>
                        </h3>
                    </div>
                </div>
                <!-- 2.Table -->
                <div class="row">
                    <div class="col-12 text-center">
                        <table class="table table-striped table-bordered table-hover text-center table-rwd">
                            <thead>
                                <tr class="tr-only-hide" ng-show="displayMode=='Patient'">
                                    <th>No.</th>
                                    <th>ID</th>
                                    <th>Identifier</th>
                                    <th>Active</th>
                                    <th>Name</th>
                                    <th>Gender</th>
                                    <th>BirthDate</th>
                                    <th>Organization</th>
                                    <th>Operate</th>
                                </tr>
                                <tr class="tr-only-hide" ng-show="displayMode=='Identifier'">
                                    <th>No.</th>
                                    <th>Use</th>
                                    <th>Type</th>
                                    <th>System</th>
                                    <th>Value</th>
                                    <th>Period</th>
                                    <th>Assigner</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-show="displayMode=='Patient'" ng-repeat="Item in resultEntry">
                                    <td data-th="No.">{{ $index + 1 +pageNum}}</td>
                                    <td data-th="ID">{{(Item.resource.id)?(Item.resource.id):'-'}}</td>
                                    <td data-th="Identifier"><button type="button" class="btn btn-sm" ng-class="{'true':'btn-success','false':'btn-outline-secondary'}[Item.resource.identifier.length>0]" ng-disabled="!Item.resource.identifier" ng-click="showIdentifier(Item.resource.identifier);">{{(Item.resource.identifier.length)?(Item.resource.identifier.length):'0'}} Data</button></th>
                                    <td data-th="Active">{{(Item.resource.active)?(Item.resource.active):'-'}}</td>
                                    <td data-th="Name">{{(Item.resource.name[0].text)?(Item.resource.name[0].text):'-'}}</td>
                                    <td data-th="Gender">{{(Item.resource.gender)?(Item.resource.gender):'-'}}</td>
                                    <td data-th="BirthDate">{{(Item.resource.birthDate)?(Item.resource.birthDate):'-'}}</td>
                                    <td data-th="Organization">{{(Item.resource.managingOrganization.reference)?(Item.resource.managingOrganization.reference):'-'}}</td>
                                    <td data-th="Operate">
                                        <button type="button" class="btn btn-sm btn-info" data-toggle="modal" data-target="#EditModel" ng-click="showResource(Item);"><i class="far fa-edit"></i></button>
                                        <button type="button" class="btn btn-sm btn-danger" ng-click="HttpReq('DELETE',Item.fullUrl)"><i class="far fa-trash-alt"></i></button>
                                    </td>
                                </tr>
                                <tr ng-show="displayMode=='Identifier'" ng-repeat="Item in IdentifierData">
                                    <td data-th="No.">{{ $index + 1}}</td>
                                    <td data-th="Use">{{(Item.use)?(Item.use):'-'}}</td>
                                    <td data-th="Type">
                                        <ui>
                                            <il>{{(type.text)?('Text：'+type.text):'-'}}</il>
                                            <il ng-repeat="type in Item.type">{{type.coding}}</il>
                                        </ui>
                                    </td>
                                    <td data-th="System">{{(Item.system)?(Item.system):'-'}}</td>
                                    <td data-th="Value">{{(Item.value)?(Item.value):'-'}}</td>
                                    <td data-th="Period">{{(Item.period)?(Item.period.start+' - '+Item.period.end):'-'}}</td>
                                    <td data-th="Assigner">{{(Item.Assigner)?(Itme.Assigner):'-'}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="btn-group btn-group-sm" ng-show="(prevPage||nextPage)">
                            <button type="button" class="btn btn-secondary" ng-disabled="!prevPage" ng-show="displayMode=='Patient'" ng-click="HttpReq('GET',prevPage)"><i class="fas fa-chevron-left mr-1"></i>Prev</button>
                            <button type="button" class="btn btn-outline-secondary" ng-show="displayMode=='Patient'" disabled>{{pageNum/_count+1}}</button>
                            <button type="button" class="btn btn-secondary" ng-disabled="!nextPage" ng-show="displayMode=='Patient'" ng-click="HttpReq('GET',nextPage)">Next<i class="fas fa-chevron-right ml-1"></i></button>
                        </div>
                    </div>
                </div>
                <!-- Modal -->
                <div class="modal fade" id="EditModel">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title"><strong>Edit Mode</strong></h5>
                                <button type="button" class="close">
                                    <span id="closeModel" data-dismiss="modal">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <strong>URL：</strong>
                                <a href="{{selectResourceURL}}" target="_blank">{{selectResourceURL}}</a>
                                <textarea class="form-control" rows="20" ng-model="selectResource">{{selectResource}}</textarea>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" ng-click="HttpReq('PUT',selectResourceURL,selectResource)">Edit</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Script -->
    <script type="text/javascript" src="./js/bootstrap/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap/popper.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap/bootstrap-select-1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap/bootstrap-select-1.13.14/dist/js/i18n/defaults-zh_TW.min.js"></script>
    <script type="text/javascript" src="./js/angularjs/angular.min.js"></script>
    <script type="text/javascript" src="./js/client.js"></script>
</body>

</html>
